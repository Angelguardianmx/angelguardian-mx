h1 Categories


= form_for @category, url: main_app.admin_categories_path(),  html: {class: 'form-inline'} do |f|
  = f.text_field :name, :placeholder => 'Nombre', class: 'input-small'
  = f.button 'AÃ±adir', class: 'btn'

table.table.table-striped
  thead
    tr
      th
      th Name
      th Header?
      th Footer?
      th
  tbody
    - @categories.each do |category|
      - unless category.parent_id
        tr id="category_#{category.id}"
          td= category.id
          td
            = link_to '+ ', main_app.new_admin_category_path(id: category.id), remote: true
            a#editable data-pk="#{category.id}" class="editable" data-title="Enter username" data-type="text" data-url="/admin/categories/#{category.id}" href="#"
              = category.name
          td= check_box_tag 'is_header',1, category.header , {class: 'is_header', "data-id" => category.id }
          td= check_box_tag 'is_footer',1, category.footer , {class: 'is_footer', "data-id" => category.id }
          td= link_to 'Delete', "/admin/categories/#{category.id}", method: :delete, confirm: "Estas seguro?"

        - category.subcategories.each do |sub_cat|
          tr class='sub_category'
            td= sub_cat.id
            td
              a#editable data-pk="#{sub_cat.id}" class="editable" data-title="Enter username" data-type="text" data-url="/admin/categories/#{sub_cat.id}" href="#"
                = sub_cat.name
            td= check_box_tag 'is_header',1, sub_cat.header, {class: 'is_header', "data-id" => sub_cat.id }
            td= check_box_tag 'is_footer',1, sub_cat.footer, {class: 'is_footer', "data-id" => sub_cat.id }
            td= link_to 'Delete', "/admin/categories/#{sub_cat.id}", method: :delete, confirm: "Estas seguro?"

